<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Minor OTP Verification</title>
    <style>
        body{background:linear-gradient(to right,#0d1b3d,#1d3a73);height:100vh;margin:0;
             display:flex;justify-content:center;align-items:center;font-family:Segoe UI,sans-serif}
        .box{background:#fff;width:420px;padding:32px;border-radius:16px;
             box-shadow:0 0 30px rgba(255,215,0,.3);color:#0d1b3d;text-align:center}
        input{width:100%;padding:12px;border:1px solid #bbb;border-radius:8px;font-size:16px;margin-top:12px}
        button{width:100%;padding:14px;margin-top:16px;background:#f7d65b;border:0;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer}
        .timer{margin-top:10px;color:red;font-weight:600}
        .msg{margin-top:10px;font-weight:600}
    </style>
</head>
<body>
<div class="box">
    <h2>Enter OTP sent to Your Email</h2>

    <form th:action="@{/minor/verify-minor-otp}" method="post">
        <input type="hidden" name="minorEmail" th:value="${minorEmail}">
        <input type="text" name="otp" placeholder="Enter OTP" required>
        <button type="submit">Verify</button>
    </form>

    <p class="msg" th:if="${error}" th:text="${error}" style="color:red;"></p>
    <p id="t" class="timer">OTP expires in 02:00</p>

    <!-- âœ… Correct Resend Form -->
    <form th:action="@{/minor/send-minor-otp}" method="post">
        <input type="hidden" name="minorEmail" th:value="${minorEmail}">
        <button type="submit" style="background:#1f3c66;color:#fff">Resend OTP</button>
    </form>
</div>

<script>
    let s=120,el=document.getElementById('t');
    let id=setInterval(()=>{let m=(s/60|0),x=s%60;el.textContent=`OTP expires in ${m}:${x<10?'0'+x:x}`;
      if(!s--){clearInterval(id);el.textContent='OTP expired! Please resend.'}},1000);
</script>
</body>
</html>
