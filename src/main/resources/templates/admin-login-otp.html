<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Login - Verify OTP</title>

    <style>
        body{
            background: linear-gradient(to right,#0d1b3d,#1d3a73);
            height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
            font-family:Segoe UI,sans-serif;
            margin:0;
        }

        .otp-box{
            background:#ffffff;
            width:450px;
            padding:40px 35px;
            border-radius:18px;
            text-align:center;
            color:#0d1b3d;
            box-shadow:0px 0px 40px rgba(0,0,0,0.25);
        }

        .otp-box h2{
            margin-bottom:25px;
            font-size:26px;
            font-weight:700;
        }

        .otp-box input{
            width:100%;
            padding:14px;
            font-size:18px;
            border:2px solid #cbd3e0;
            border-radius:10px;
            margin-top:12px;
            outline:none;
        }

        .otp-box input:focus{
            border-color:#1f3c66;
        }

        .otp-box button{
            width:100%;
            padding:14px;
            margin-top:25px;
            background:#f5c542;
            border:0;
            border-radius:10px;
            font-size:18px;
            font-weight:600;
            cursor:pointer;
        }

        .otp-box button:hover{
            background:#d9ad39;
        }

        .msg{
            margin-top:12px;
            font-weight:600;
        }

        .timer{
            margin-top:15px;
            font-size:16px;
            color:red;
            font-weight:600;
        }

        .resend-btn {
            margin-top:10px;
            background:#1f3c66 !important;
            color:white !important;
        }
    </style>
</head>

<body>

<div class="otp-box">

    <h2>Verify OTP</h2>

    <p style="font-size:14px;opacity:0.8;">OTP has been sent to <b th:text="${email}"></b></p>

    <form th:action="@{/admin/verify-login-otp}" method="post">
        <input type="hidden" name="email" th:value="${email}">
        <input type="text" name="otp" placeholder="Enter OTP" required>
        <button type="submit">Verify OTP</button>
    </form>

    <p class="msg" th:if="${error}" th:text="${error}" style="color:red;"></p>

    <p class="timer" id="timer">OTP expires in 02:00</p>

    <form th:action="@{/admin/resend-login-otp}" method="post">
        <input type="hidden" name="email" th:value="${email}">
        <button class="resend-btn" type="submit">Resend OTP</button>
    </form>

</div>

<script>
    let timeLeft = 120;
    const timer = document.getElementById("timer");

    const countdown = setInterval(() => {
        let min = Math.floor(timeLeft / 60);
        let sec = (timeLeft % 60).toString().padStart(2, '0');
        timer.innerText = `OTP expires in ${min}:${sec}`;

        if(timeLeft <= 0){
            clearInterval(countdown);
            timer.innerText = "OTP expired. Please resend.";
        }
        timeLeft--;
    }, 1000);
</script>

</body>
</html>
